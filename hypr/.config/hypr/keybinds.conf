$terminal = kitty
$fileManager = thunar
$menu = rofi -show drun
$browser = zen-browser

################
### Keybinds ###
################
$mainmod = SUPER # Sets "Windows" key as main modifier

bind = $mainmod, u, exec, hyprpicker
bind = $mainmod, 1, exec, $terminal
bind = $mainmod, 2, exec, $browser
bind = $mainmod, 3, exec, $fileManager
bind = $mainmod, q, killactive,
bind = ALT, V, exec, cliphist list | rofi -dmenu | cliphist decode | wl-copy
bind = ALT, c, exec, pkill galculator || galculator
bind = $mainmod, f, fullscreen,
bind = $mainmod, i, exec, pkill iwgtk || iwgtk
bind = $mainmod, space, exec, $menu # rofi menu
bind = $mainmod, P, pseudo, # dwindle, only work in dwindle
bind = $mainmod, j, togglesplit, # dwindle, only work in dwindle
bind = $mainmod, w, exec, wlogout --protocol layer-shell -b 6
bind = , PRINT, exec, hyprshot -m region -o ~/Pictures/screenshots #mkdir ~/screenshots if it dosen't exist
bind = $mainmod , PRINT, exec, hyprshot -m window -o ~/Pictures/screenshots 
bind = $mainmod , b , exec, pkill bluetuith || alacritty --class bluetuith --title bluetuith -e bluetuith
bind = $mainmod, n, exec ,swaync-client -t -sw
bind = $mainmod, z, exec ,swaync-client -t -sw
# bindl= , switch:Lid Switch, exec, hyprlock 
# better to edit /etc/systemd/login.conf and edit lid switch options
# that will also be much faster.

#floating binds, window remembers size when floating so resize as preffered.
bind = ALT, f, togglefloating
bind = ALT, f, centerwindow

#Resize window with mainmod + h/l
binde = $mainmod,h,resizeactive,-20 0
binde = $mainmod,l,resizeactive,20 0

# Move focus with ALT + h/j/k/l
bind = ALT, h, movefocus, l
bind = ALT, l, movefocus, r
bind = ALT, k, movefocus, u
bind = ALT, j, movefocus, d

# cycle focus between focused and tiled window
bind = ALT, n, exec, \
  test "$(hyprctl activewindow -j | jq '.floating')" = "true" && \
    hyprctl dispatch cyclenext tiled || \
    hyprctl dispatch cyclenext floating

# Switch workspaces with ALT + [0-5]
bind = ALT, 1, workspace, 1
bind = ALT, 2, workspace, 2
bind = ALT, 3, workspace, 3
bind = ALT, 4, workspace, 4
bind = ALT, 5, workspace, 5

# Move active window to a workspace with ALT + SHIFT + [0-5]
bind = ALT SHIFT, 1, movetoworkspace, 1
bind = ALT SHIFT, 2, movetoworkspace, 2
bind = ALT SHIFT, 3, movetoworkspace, 3
bind = ALT SHIFT, 4, movetoworkspace, 4
bind = ALT SHIFT, 5, movetoworkspace, 5

# Move/resize windows with mainmod + LMB/RMB and dragging
bindm = $mainmod, mouse:272, movewindow
bindm = $mainmod, mouse:273, resizewindow

#function row mappings
binde = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+ -l 1.5 && \
    wpctl get-volume @DEFAULT_AUDIO_SINK@ | \
    awk '{print int($2*100); if($3=="[MUTED]") print 0; else print int($2*100) }' | \
    xargs -I{} notify-send -e -t 1500 -u low \
      -h string:x-canonical-private-synchronous:volume_notif \
      -h int:value:{} "󰕾 {}%"
binde = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%- && \
    wpctl get-volume @DEFAULT_AUDIO_SINK@ | \
    awk '{print int($2*100); if($3=="[MUTED]") print 0; else print int($2*100) }' | \
    xargs -I{} notify-send -e -t 1500 -u low \
      -h string:x-canonical-private-synchronous:volume_notif \
      -h int:value:{} "󰕾 {}%"
bind = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle && \
    (wpctl get-volume @DEFAULT_AUDIO_SINK@ | grep -q "\[MUTED\]" && \
    notify-send -e -t 1500 -u low -h string:x-canonical-private-synchronous:volume_notif "󰖁 Muted" || \
    wpctl get-volume @DEFAULT_AUDIO_SINK@ | awk '{print int($2*100)}' | xargs -I{} notify-send -e -t 1500 -u low -h string:x-canonical-private-synchronous:volume_notif -h int:value:{} "󰕾 {}%")
binde = , XF86MonBrightnessUp, exec, brightnessctl set 5%+ -m | awk -F ',' '{print $4+0}' | xargs -I[] notify-send -e -u low -h string:x-canonical-private-synchronous:brightness_notif -h int:value:[] "☀ Brightness : []%" 
binde = , XF86MonBrightnessDown, exec, brightnessctl set 5%- -m | awk -F ',' '{print $4+0}' | xargs -I[] notify-send -e -u low -h string:x-canonical-private-synchronous:brightness_notif -h int:value:[] "☀ Brightness : []%"
windowrulev2 = suppressevent maximize, class:.* # You'll probably like this.

# bindl = ,XF86AudioPlay, exec, playerctl play-pause
# bindl = ,XF86AudioPrev, exec, playerctl previous
# bindl = ,XF86AudioNext, exec, playerctl next
# Thinkpad dosent have media control keys :(
bindl = , HOME, exec, playerctl previous
bindl = , END, exec, playerctl play-pause
bindl = , INSERT, exec, playerctl next



#####################
### Pypr keybinds ###
#####################
exec-once = /usr/local/bin/pypr --debug /tmp/pypr.log
bind = $mainmod, A, exec, pypr toggle term # toggles the "term" scratchpad visibility
# bind = ALT, e, exec, pypr toggle editor
bind = ALT, w, exec, pypr fetch_client_menu
bind = $mainmod,c,exec,pypr toggle clock
# bind = $mainmod,v,exec,pypr toggle volume
bind = $mainmod,m,exec,pypr toggle btop
